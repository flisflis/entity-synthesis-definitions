domain: EXT
type: PIHOLE

synthesis:
  rules:
    # telemetry from prometheus exporter
    - identifier: hostname
      name: hostname
      encodeIdentifierInGUID: true
      conditions:
        - attribute: instrumentation.provider
          value: prometheus

    # telemetry with piHoleName attribute
    - identifier: piHoleName
      name: piHoleName
      encodeIdentifierInGUID: true
      conditions:
        - attribute: serviceName

  conditions:
    - attribute: metricName
      prefix: pihole_

dashboardTemplates:
  newRelic:
    template: dashboard.json

compositeMetrics:
  goldenMetrics:
    - golden_metrics.yml
  summaryMetrics:
    - summary_metrics.yml

configuration:
  entityExpirationTime: EIGHT_DAYS
  alertable: true
